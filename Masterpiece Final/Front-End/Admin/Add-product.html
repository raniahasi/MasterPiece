<!DOCTYPE html>
<html lang="en">


<!-- Mirrored from codescandy.com/geeks-bootstrap-5/pages/dashboard/ecommerce/add-product.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 06 Sep 2024 16:29:45 GMT -->
<head>  <!-- Required meta tags -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="">
<meta name="keywords" content="">
<meta name="author" content="Codescandy">

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-M8S4MT3EYG"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-M8S4MT3EYG');
</script>



<script>
    // Render blocking JS:
    if (localStorage.theme) document.documentElement.setAttribute("data-theme", localStorage.theme);
    </script>

<!-- Favicon icon-->
<link rel="shortcut icon" type="image/x-icon" href="https://codescandy.com/geeks-bootstrap-5/assets/images/favicon/favicon.ico">


<!-- Libs CSS -->
<link href="assets/fonts/feather/feather.css" rel="stylesheet">
<link href="assets/libs/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet" />
<link href="assets/libs/%40mdi/font/css/materialdesignicons.min.css" rel="stylesheet" />
<link href="assets/libs/simplebar/dist/simplebar.min.css" rel="stylesheet">




<!-- Theme CSS -->
<link rel="stylesheet" href="assets/css/theme.min.css">

  <link href="assets/libs/dropzone/dist/dropzone.css" rel="stylesheet" >
  <link href="assets/libs/%40yaireo/tagify/dist/tagify.css" rel="stylesheet">
  <title>Add Product</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

</head>

<body>
      <!-- Wrapper -->
      <div id="db-wrapper">
        <!-- navbar vertical -->
      <!-- navbar vertical -->
      <nav class="navbar-vertical navbar">
        <div class="vh-100" data-simplebar>
            <!-- Brand logo -->
            <a class="navbar-brand" href="https://codescandy.com/geeks-bootstrap-5/index.html">
            </a>
                <!-- Navbar nav -->
                <ul class="navbar-nav flex-column" id="sideNavbar">
    
    
    
    
                    <!-- Nav item User -->
        
                    <li class="nav-item">
                        <a class="nav-link " href="Users.html">
                            <i class="fas fa-user" style="font-size:24px"></i>
                            </i> User
                        </a>
        
                    </li>
        
        
                    <li class="nav-item">
                        <a class="nav-link " href="Add-Admin.html">
                            <i class="fas fa-user" style="font-size:24px"></i>
                            </i> Add Admin
                        </a>
        
                    </li>
        
        
                    <!-- Nav item Orders -->
                    <li class="nav-item">
                        <a class="nav-link " href="order.html">
                            <i class='fas fa-receipt' style='font-size:24px'></i>
                            </i> &nbsp; &nbsp;Orders
        
                        </a>
                    </li>
        
        
        
        
        
        
        
                    <!-- Nav item Categories -->
        
                    <li class="nav-item">
                        <a class="nav-link   collapsed " href="#" data-bs-toggle="collapse"
                            data-bs-target="#navDashboard" aria-expanded="false" aria-controls="navDashboard">
                            <i class="fas fa-th-large" style="font-size:24px"></i>
                            &nbsp; Categories
                        </a>
                        <div id="navDashboard" class="collapse " data-bs-parent="#sideNavbar">
                            <ul class="nav flex-column">
                                <li class="nav-item ">
                                    <a class="nav-link " href="addCategory.html">
                                        Add Category
                                    </a>
                                </li>
                                <!-- Nav item -->
                                <li class="nav-item ">
                                    <a class="nav-link " href="categories.html">
                                        View ALL Categories
        
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </li>
        
        
        
        <!-- Nav item Comment -->
        <li class="nav-item">
            <a class="nav-link " href="Comment.html">
                <i class="fas fa-comment" style="font-size:24px"></i>

                </i> &nbsp; &nbsp;Comments

            </a>
        </li>
        <li class="nav-item">
            <a class="nav-link " href="contact.html">
                <i class="fas fa-comment" style="font-size:24px"></i>

                </i> &nbsp; &nbsp;Contact Us

            </a>
        </li>


        
        
                    <!-- Nav item Products -->
        
                    <li class="nav-item">
                        <a class="nav-link   collapsed " href="#" data-bs-toggle="collapse"
                            data-bs-target="#navDashboard" aria-expanded="false" aria-controls="navDashboard">
                            <i class="fas fa-box" style="font-size:24px"></i>
                            &nbsp; Products
                        </a>
                        <div id="navDashboard" class="collapse " data-bs-parent="#sideNavbar">
                            <ul class="nav flex-column">
                                <li class="nav-item ">
                                    <a class="nav-link " href="Add-product.html">
                                        Add Products
                                    </a>
                                </li>
                                <!-- Nav item -->
                                <li class="nav-item ">
                                    <a class="nav-link " href="admin-products.html">
                                        View ALL Products
        
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </li>
        
        
        
     
                 
        
        
        
        
                    <!-- Nav item  Chat-->
                   
        
                </ul>
            </div>
        
        
        </nav>

<!--page content-->
<div id="page-content">
    <div class="header">
        <!-- navbar -->
        <nav class="navbar-default navbar navbar-expand-lg">
            <!-- Add the rest of your navbar here -->
        </nav>
    </div>
    <!-- Container fluid -->
    <div class="container-fluid p-4">
        <div class="row ">
            <div class="col-lg-12 col-md-12 col-12">
                <!-- Page header -->
                <div class="border-bottom pb-3 mb-3 ">
                    <h1 class="mb-0 h2 fw-bold">Add New Product</h1>
                    <!-- Breadcrumb -->
                    <nav aria-label="breadcrumb">
                        <ol class="breadcrumb">
                            <li class="breadcrumb-item"><a href="admin-dashboard.html">Dashboard</a></li>
                            <li class="breadcrumb-item"><a href="#">Ecommerce</a></li>
                            <li class="breadcrumb-item active" aria-current="page">Add Product</li>
                        </ol>
                    </nav>
                </div>
            </div>
        </div>
        <!-- Form to add new product -->
        <form id="addProductForm" enctype="multipart/form-data">
            <div class="mb-3">
                <label for="Name">Product Name</label>
                <input type="text" class="form-control" id="productName" name="productName" required>
            </div>
            <div class="mb-3">
                <label for="productDescription">Description</label>
                <textarea class="form-control" id="productDescription" name="productDescription" required></textarea>
            </div>
            <div class="mb-3">
                <label for="productPrice">Price</label>
                <input type="number" class="form-control" id="productPrice" name="price" required>
            </div>
            <div class="mb-3">
                <label for="productPriceWithDiscount">Price with Discount</label>
                <input type="number" class="form-control" id="productPriceWithDiscount" name="productPriceWithDiscount">
            </div>
           
            
            <div class="mb-3">
                <label for="categoryId">Category</label>
                <select class="form-control" id="categoryId" name="categoryId" required>
                    <!-- Categories will be populated here by JavaScript -->
                </select>
            </div>
            <div class="mb-3">
                <label for="productImage">Product Image</label>
                <input type="file" class="form-control-file" id="productImage" name="Image">
            </div>
            <button type="submit" class="btn btn-primary">Save Product</button>
        </form>
    </div>
</div>



  <!-- Scripts -->
  <script src="assets/libs/%40yaireo/tagify/dist/tagify.min.js"></script>
  <!-- Libs JS -->
<script src="assets/libs/jquery/dist/jquery.min.js"></script>
<script src="assets/libs/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
<script src="assets/libs/simplebar/dist/simplebar.min.js"></script>


<!-- Theme JS -->
<script src="assets/js/theme.min.js"></script>

  <script src="assets/libs/dropzone/dist/min/dropzone.min.js"></script>
  <script src="assets/libs/quill/dist/quill.min.js"></script>
  <script src="assets/js/vendors/editor.js"></script>

<script src="assets/libs/flatpickr/dist/flatpickr.min.js"></script>
<script src="assets/js/vendors/flatpickr.js"></script>
<script src="addcategory.js"></script>




<!--raniascript-->
<script>
    document.addEventListener("DOMContentLoaded", function () {
  // Fetch categories and populate the category dropdown
  fetch("https://localhost:7159/api/Categories")
    .then((response) => response.json())
    .then((categories) => {
      console.log("Categories data received from API:", categories);

      // Handle potential nested structure in categories data
      if (categories.$values) {
        categories = categories.$values; // Extract the array from $values
      }

      // Check if categories is an array
      if (!Array.isArray(categories)) {
        console.error("Categories data is not an array. Check API response format.");
        return;
      }

      // Populate the category dropdown
      const categoryDropdown = document.getElementById("categoryId");
      categories.forEach((category) => {
        console.log("Adding Category:", category); // Debug: Log each category
        const option = document.createElement("option");
        option.value = category.categoryId;
        option.textContent = category.name;
        categoryDropdown.appendChild(option);
      });
    })
    .catch((error) => {
      console.error("Error fetching categories:", error);
      alert("Failed to load categories. Please try again later.");
    });

  // Handle form submission to add a product
  document.getElementById("addProductForm").addEventListener("submit", function (event) {
    event.preventDefault();

    // Collect form data
    const formData = new FormData();
    formData.append("Name", document.getElementById("productName").value);
    formData.append("Description", document.getElementById("productDescription").value);
    formData.append("Price", document.getElementById("productPrice").value);
    formData.append("PriceWithDiscount", document.getElementById("productPriceWithDiscount").value);
    formData.append("CategoryId", document.getElementById("categoryId").value);

    // Handle image upload
    const imageFile = document.getElementById("productImage").files[0];
    if (imageFile) {
      formData.append("Image", imageFile);
    }

    // Debug: Log form data before sending
    console.log("Form Data to be sent:", Object.fromEntries(formData));

    // Send form data via POST request
    fetch("https://localhost:7159/api/Products", {
      method: "POST",
      body: formData,
    })
      .then((response) => {
        if (!response.ok) {
          throw new Error("Failed to add product."); // Handle non-OK responses
        }
        return response.json();
      })
      .then((data) => {
        console.log("Product added successfully. Response:", data); // Debug: Log success response
        alert("Product added successfully!");
        window.location.href = "admin-products.html";
      })
      .catch((error) => {
        console.error("Error adding product:", error);
        alert("Failed to add product. Please try again.");
      });
  });
});

    
</script>

</body>


<!-- Mirrored from codescandy.com/geeks-bootstrap-5/pages/dashboard/ecommerce/add-product.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 06 Sep 2024 16:29:48 GMT -->
</html>